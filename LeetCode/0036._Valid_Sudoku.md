### 思路1： 首先想到

解法中没有必要用dict,我们只某个数字关心有没有出现过 list即可

[ apachecn / awesome-algorithm ](https://github.com/apachecn/awesome-algorithm/blob/master/docs/Leetcode_Solutions/Python/0036._Valid_Sudoku.md)

### 思路2： 只循环一次完成数据的分类，用存储空间来换取算法的效率（借鉴）。

```python3
dic_row = [{},{},{},{},{},{},{},{},{}]            # 每行的元素以一个字典储存，key是数字，value统一为1.
dic_col = [{},{},{},{},{},{},{},{},{}]
dic_box = [{},{},{},{},{},{},{},{},{}]

for i in range(len(board)):
    for j in range(len(board)):
        num = board[i][j]
        if num == ".":
            continue
        if num not in dic_row[i] and num not in dic_col[j] and num not in dic_box[3*(i//3)+(j//3)]:
            dic_row[i][num] = 1
            dic_col[j][num] = 1
            dic_box[3*(i//3)+(j//3)][num] = 1       # 利用地板除，向下取余。巧妙地将矩阵划分为九块
        else:
            return False

return True
```
```python3
import pprint

dic_row = [{},{},{},{},{},{},{},{},{}]            # 每行的元素以一个字典储存，key是数字，value统一为1.
dic_col = [{},{},{},{},{},{},{},{},{}]
dic_box = [{},{},{},{},{},{},{},{},{}]
board = [
  ["5","3",".",".","7",".",".",".","."],
  ["6",".",".","1","9","5",".",".","."],
  [".","9","8",".",".",".",".","6","."],
  ["8",".",".",".","6",".",".",".","3"],
  ["4",".",".","8",".","3",".",".","1"],
  ["7",".",".",".","2",".",".",".","6"],
  [".","6",".",".",".",".","2","8","."],
  [".",".",".","4","1","9",".",".","5"],
  [".",".",".",".","8",".",".","7","9"]
]

for i in range(len(board)):
    for j in range(len(board)):
        num = board[i][j]
        if num == ".":
            continue
        if num not in dic_row[i] and num not in dic_col[j] and num not in dic_box[3*(i//3)+(j//3)]:
            dic_row[i][num] = 1
            dic_col[j][num] = 1
            dic_box[3*(i//3)+(j//3)][num] = 1       # 利用地板除，向下取余。巧妙地将矩阵划分为九块
        else:
            print("xxx")
pprint.pprint(dic_row)
pprint.pprint(dic_col)
pprint.pprint(dic_box)

# ---------------
[{'3': 1, '5': 1, '7': 1},
 {'1': 1, '5': 1, '6': 1, '9': 1},
 {'6': 1, '8': 1, '9': 1},
 {'3': 1, '6': 1, '8': 1},
 {'1': 1, '3': 1, '4': 1, '8': 1},
 {'2': 1, '6': 1, '7': 1},
 {'2': 1, '6': 1, '8': 1},
 {'1': 1, '4': 1, '5': 1, '9': 1},
 {'7': 1, '8': 1, '9': 1}]
[{'4': 1, '5': 1, '6': 1, '7': 1, '8': 1},
 {'3': 1, '6': 1, '9': 1},
 {'8': 1},
 {'1': 1, '4': 1, '8': 1},
 {'1': 1, '2': 1, '6': 1, '7': 1, '8': 1, '9': 1},
 {'3': 1, '5': 1, '9': 1},
 {'2': 1},
 {'6': 1, '7': 1, '8': 1},
 {'1': 1, '3': 1, '5': 1, '6': 1, '9': 1}]
[{'3': 1, '5': 1, '6': 1, '8': 1, '9': 1},
 {'1': 1, '5': 1, '7': 1, '9': 1},
 {'6': 1},
 {'4': 1, '7': 1, '8': 1},
 {'2': 1, '3': 1, '6': 1, '8': 1},
 {'1': 1, '3': 1, '6': 1},
 {'6': 1},
 {'1': 1, '4': 1, '8': 1, '9': 1},
 {'2': 1, '5': 1, '7': 1, '8': 1, '9': 1}]

Process finished with exit code 0
```
```python3
# 思路2  的另一种实现方式。代码更为简洁（借鉴）
        Cell = [[] for i in range(9)]                   # 没有必要用dict,我们只某个数字关心有没有出现过
        Col =  [[] for i in range(9)]
        Row =  [[] for i in range(9)]
        
        for i,row in enumerate(board):                  # 将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在 for 循环当中
            for j,num in enumerate(row):
                if num != '.':
                    k = (i//3)*3 + j//3
                    if num in Row[i] + Col[j] + Cell[k]:    # list的骚操作,将三个list顺序的拼接 
                        return False
                    Row[i].append(num)
                    Col[j].append(num)
                    Cell[k].append(num)
                        
        return True
```

### 思路3  genius

[1-7 lines Python, 4 solutions](https://leetcode.com/problems/valid-sudoku/discuss/15460/1-7-lines-Python-4-solutions)

```python3
import collections


board = [
  ["5","3",".",".","7",".",".",".","."],
  ["5",".",".","1","9","5",".",".","."],
  [".","9","8",".",".",".",".","6","."],
  ["8",".",".",".","6",".",".",".","3"],
  ["4",".",".","8",".","3",".",".","1"],
  ["7",".",".",".","2",".",".",".","6"],
  [".","6",".",".",".",".","2","8","."],
  [".",".",".","4","1","9",".",".","5"],
  [".",".",".",".","8",".",".","7","9"]
]

def isValidSudoku(self, board):
    return 1 == max(collections.Counter(
        x
        for i, row in enumerate(board)
        for j, c in enumerate(row)
        if c != '.'
        for x in ((c, i), (j, c), (i//3, j//3, c))
    ).values())

cc = 0
li = []
for i, row in enumerate(board):
    for j, c in enumerate(row):
        if c != '.':
            for x in ((c, i), (j, c), (i // 3, j // 3, c)):
                cc+=1
                li.append(x)
                #print(x)
print("li")
print(li)
print("\ncollections.Counter(li)")
print(collections.Counter(li))
print("\ncollections.Counter(li).values()")
print(collections.Counter(li).values())
#print(collections.Counter(li).values() + [1])
print("\nmax(collections.Counter(li).values())")
print(max(collections.Counter(li).values()))

print(cc)  # 9宫格中不为"."的个数

# -----------------------------------
li
[('5', 0), (0, '5'), (0, 0, '5'), ('3', 0), (1, '3'), (0, 0, '3'), ('7', 0), (4, '7'), (0, 1, '7'), ('5', 1), (0, '5'), (0, 0, '5'), ('1', 1), (3, '1'), (0, 1, '1'), ('9', 1), (4, '9'), (0, 1, '9'), ('5', 1), (5, '5'), (0, 1, '5'), ('9', 2), (1, '9'), (0, 0, '9'), ('8', 2), (2, '8'), (0, 0, '8'), ('6', 2), (7, '6'), (0, 2, '6'), ('8', 3), (0, '8'), (1, 0, '8'), ('6', 3), (4, '6'), (1, 1, '6'), ('3', 3), (8, '3'), (1, 2, '3'), ('4', 4), (0, '4'), (1, 0, '4'), ('8', 4), (3, '8'), (1, 1, '8'), ('3', 4), (5, '3'), (1, 1, '3'), ('1', 4), (8, '1'), (1, 2, '1'), ('7', 5), (0, '7'), (1, 0, '7'), ('2', 5), (4, '2'), (1, 1, '2'), ('6', 5), (8, '6'), (1, 2, '6'), ('6', 6), (1, '6'), (2, 0, '6'), ('2', 6), (6, '2'), (2, 2, '2'), ('8', 6), (7, '8'), (2, 2, '8'), ('4', 7), (3, '4'), (2, 1, '4'), ('1', 7), (4, '1'), (2, 1, '1'), ('9', 7), (5, '9'), (2, 1, '9'), ('5', 7), (8, '5'), (2, 2, '5'), ('8', 8), (4, '8'), (2, 1, '8'), ('7', 8), (7, '7'), (2, 2, '7'), ('9', 8), (8, '9'), (2, 2, '9')]

collections.Counter(li)
Counter({(0, '5'): 2, (0, 0, '5'): 2, ('5', 1): 2, ('5', 0): 1, ('3', 0): 1, (1, '3'): 1, (0, 0, '3'): 1, ('7', 0): 1, (4, '7'): 1, (0, 1, '7'): 1, ('1', 1): 1, (3, '1'): 1, (0, 1, '1'): 1, ('9', 1): 1, (4, '9'): 1, (0, 1, '9'): 1, (5, '5'): 1, (0, 1, '5'): 1, ('9', 2): 1, (1, '9'): 1, (0, 0, '9'): 1, ('8', 2): 1, (2, '8'): 1, (0, 0, '8'): 1, ('6', 2): 1, (7, '6'): 1, (0, 2, '6'): 1, ('8', 3): 1, (0, '8'): 1, (1, 0, '8'): 1, ('6', 3): 1, (4, '6'): 1, (1, 1, '6'): 1, ('3', 3): 1, (8, '3'): 1, (1, 2, '3'): 1, ('4', 4): 1, (0, '4'): 1, (1, 0, '4'): 1, ('8', 4): 1, (3, '8'): 1, (1, 1, '8'): 1, ('3', 4): 1, (5, '3'): 1, (1, 1, '3'): 1, ('1', 4): 1, (8, '1'): 1, (1, 2, '1'): 1, ('7', 5): 1, (0, '7'): 1, (1, 0, '7'): 1, ('2', 5): 1, (4, '2'): 1, (1, 1, '2'): 1, ('6', 5): 1, (8, '6'): 1, (1, 2, '6'): 1, ('6', 6): 1, (1, '6'): 1, (2, 0, '6'): 1, ('2', 6): 1, (6, '2'): 1, (2, 2, '2'): 1, ('8', 6): 1, (7, '8'): 1, (2, 2, '8'): 1, ('4', 7): 1, (3, '4'): 1, (2, 1, '4'): 1, ('1', 7): 1, (4, '1'): 1, (2, 1, '1'): 1, ('9', 7): 1, (5, '9'): 1, (2, 1, '9'): 1, ('5', 7): 1, (8, '5'): 1, (2, 2, '5'): 1, ('8', 8): 1, (4, '8'): 1, (2, 1, '8'): 1, ('7', 8): 1, (7, '7'): 1, (2, 2, '7'): 1, ('9', 8): 1, (8, '9'): 1, (2, 2, '9'): 1})

collections.Counter(li).values()
dict_values([1, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])

max(collections.Counter(li).values())
2
90


# for x in (('5', 0),  (0, '5'),  (0, 0, '5')):
#     print(x)
# ('5', 0)
# (0, '5')
# (0, 0, '5')
```

